<!doctype html>
<html lang="en">
<head>
    <script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
    <meta charset="UTF-8"/>
    <title>Google Cast</title>
    <style type="text/css">
        body {
            background-color: #000;
            margin: 0;
            padding: 10%;
            color: #fff;
        }
    </style>
</head>
<body>
<div id="debug-log"></div>
<script>
    var logEl = document.getElementById('debug-log')
    var log = function (text) {
        console.log(text);
        logEl.innerHTML = logEl.innerHTML + '<br/>' + text;
    };

    var appConfig = new cast.receiver.CastReceiverManager.Config();
    appConfig.statusText = 'Ready to rock \'n\' roll!';
    appConfig.maxInactivity = 15;

    var castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
    var castMessageBus = castReceiverManager.getCastMessageBus('urn:x-cast:city.trapps.cc.codelab');

    castReceiverManager.onReady = function (event) {
        log('onReady(event.data:' + JSON.stringify(event.data) + ')');
    };
    castReceiverManager.onSenderConnected = function (event) {
        log('onSenderConnected(event.data:' + JSON.stringify(event.data) + ')');
    };
    castReceiverManager.onSenderDisconnected = function (event) {
        log('onSenderDisconnected(event.data:' + JSON.stringify(event.data) + ')');
        log('reason: ' + event.reason);
    };
    castReceiverManager.onShutdown = function (event) {
        log('onShutdown(event.data:' + JSON.stringify(event.data) + ')');
    };
    castReceiverManager.onSystemVolumeChanged = function (event) {
        log('onSystemVolumeChanged(event.data:' + JSON.stringify(event.data) + ')');
    };
    castReceiverManager.onVisibilityChanged = function (event) {
        log('onVisibilityChanged(event.data:' + JSON.stringify(event.data) + ')');
    };
    castMessageBus.onMessage = function (event) {
        log('onMessage(senderId:' + event.senderId + ', event.data:' + JSON.stringify(event.data) + ')');
    };

    castReceiverManager.start(appConfig);
</script>
</body>
</html>
